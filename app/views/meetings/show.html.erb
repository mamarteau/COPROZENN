<div class="container-fluid" style="padding: 0;">
<div class="container mt-5 justify-content-center">
  <div class="card border-0 rounded shadow-lg p-4" style="max-width: 700px; width: 100%;">
    <h2><%= @meeting.title %></h2>
    <p><%= @meeting.date %></p>
    <p><%= @meeting.link %></p>
    <p><%= @meeting.description %></p>

    <p><%= link_to "Ajouter un document", new_meeting_document_path(@meeting), class:"button-card"%></p>

    <p><%= link_to "Ajouter une decision", new_meeting_decision_path(@meeting), class:"button-card"%></p>

    <div class="d-flex flex-column gap-4" data-controller="vote">
      <% @decisions.each do |decision| %>
        <div class="card p-3">
          <div><strong><%= link_to decision.description, vote_decision_path(decision) %></strong></div>

          <% if decision.closed? %>
            <div data-vote-target="resultSection" class="mt-3">
              <% total_pour = decision.for%>
              <% total_contre = decision.against %>

              <% if total_pour > total_contre %>
                <p>La majorité a voté <strong>"Pour"</strong> avec <%= total_pour %> votes.</p>
              <% elsif total_contre > total_pour %>
                <p>La majorité a voté <strong>"Contre"</strong> avec <%= total_contre %> votes.</p>
              <% else %>
                <p>Il y a une égalité avec <%= total_pour %> votes "Pour" et <%= total_contre %> votes "Contre".</p>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>


  </div>
      <% if @meeting.documents.any? %>
        <% @meeting.documents.each do |document| %>
         <div class = "card border-0 rounded shadow-lg p-4" style="max-width: 300px;">
          <%= cl_image_tag document.file.key, class:"d-block w-100" %>
        </div>
        <% end %>
      <% end %>
    <p><%= link_to "Tous les meetings", meeting_path, class:"button-card"%></p>
  </div>


  </div>



</div>
